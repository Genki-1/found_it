<div class="row">
	<div class="col-xs-10 col-xs-offset-1">
		<h2>ユーザー情報変更</h2>
			<!-- エラーメッセージ -->
			<% if @user.errors.any? %>
			    <div id="error_explanation" class="alert alert-danger">
			    	<ul>
				        <% @user.errors.full_messages.each do |message| %>
				            <li><%= message %></li>
				        <% end %>
			    	</ul>
			    </div>
			<% end %>
			<!-- エラーメッセージ -->
		<div class="user_profile">
			<%= form_for @user, url: user_path do |f| %>
			<div class="row user_profile_margin">
				<div class="col-xs-5">
					<h3>プロフィール画像</h3>
					<div align="center">
						<%= attachment_image_tag @recipe, :image, fallback: "no_image.jpg", size:'200x200', id: "file-preview" %>
						<%= f.attachment_field :image, class: "btn btn-blue item_attachment_field", id: "image_select"%>
						<label for="image_select" class="btn btn-blue item_attachment_field" style="display: block;">画像選択</label>
					</div>
				</div>
				<div class="col-xs-7">
					<h3>ニックネーム</h3>
					<%= f.text_field :name, class: 'form-control' %>
					<h3>自己紹介文</h3>
					<%= f.text_area :introduction, rows:'4' ,class: 'form-control' %>
				</div>
			</div>
		</div>
		<div class="action" align="center">
				<%= f.submit "　　ユーザー情報を変更する　　" ,class: "btn btn-blue btn-lg" %>
		</div>
		<div class="action" align="right">
				<%= link_to '退会する',leave_users_path ,class: "btn btn-red" %>
		</div>
		<% end %>
	</div>
</div>

<!-- 画像選択した際に、選択した画像を表示させるjavascript -->
<script>
	document.getElementById('image_select').addEventListener('change', function (e) {
    // 1枚だけ表示する
    var file = e.target.files[0];

    // ファイルのブラウザ上でのURLを取得する
    var blobUrl = window.URL.createObjectURL(file);

    // img要素に表示
    var img = document.getElementById('file-preview');
    img.src = blobUrl;
});
</script>